<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto+Slab:wght@400;700&family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root{
    --accent: #c62828;
    --bg: #ffb74d;
    --text: #111;

    /* Página A4 landscape: ancho total 297mm. Ajusta si cambias padding/gap */
    --page-width: 297mm;
    --page-padding: 8mm;   /* padding lateral aplicado a .page */
    --column-gap: 10mm;    /* gap entre columnas */
    /* ancho disponible para columnas = page - 2*padding - 2*gaps (3 cols => 2 gaps) */
    --col-width: calc( (var(--page-width) - (var(--page-padding) * 2) - (var(--column-gap) * 2)) / 3 );
  }
  html { font-size: 12px; }   
  @page { size: A4 landscape; margin: 0; }

  /* Forzar que los colores de fondo se impriman */
  html, body, .page, .offert-card, table, thead th, tbody td {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  html,body {
    margin:0;
    padding:0;
    width: 297mm;
    height: 210mm;
    color: var(--text);
    font-family: "Montserrat", system-ui, sans-serif;
  }

  /* Poner el fondo en un wrapper .page para que wkhtmltopdf lo pinte */
  .page {
    width: 297mm;           /* A4 landscape width */
    max-width: 297mm;
    box-sizing: border-box;
    padding: 8mm;           /* espacio interior; recuerda que @page margin:0 */
    background: var(--bg);
  }

  /* Layout columnas: aplicar a un contenedor dentro de .page */
  .columns {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
  }
  .price-table {
    width: calc(25% - 2rem);
  }
  /* Cabecera */
  .header{ display:block; break-inside:avoid; margin-bottom:1rem; width:100% }
  .brand{ font-family:"Playfair Display",serif; font-weight:700; font-size:3rem; text-transform:uppercase; letter-spacing:.08em; margin:0 }
  .subtitle{ font-family:"Roboto Slab",serif; font-weight:700; font-size:1.6rem; text-transform:uppercase; color:var(--accent); margin:.1rem 0 0 }
  .address{ font-size:.95rem; text-transform:uppercase; margin:.4rem 0 0; color:#222; letter-spacing:.06em }

  /* Evitar fragmentación y shrink-to-fit */
  .price-table{ display:inline-block; vertical-align:top; break-inside:avoid; -webkit-column-break-inside:avoid; -moz-column-break-inside:avoid; margin:0 0 1.25rem; width:auto; max-width:100% }
  .offert-card{ display:inline-block; vertical-align:top; break-inside:avoid; padding:.75rem 1rem; background:#111; border-radius:15px; color:#fff; box-shadow:0 4px 6px rgba(0,0,0,.1); width:auto; max-width:100% }

  .offert-card h1 { 
    font-size: 1.5rem;
  }
  /* Flex: añadir prefijos y fallback */
  .flex-row { 
    display: -webkit-box; 
    display: -webkit-flex; 
    display: flex; 
    -webkit-box-orient: horizontal; 
    -webkit-box-direction: normal; 
    -webkit-flex-direction: row; 
    flex-direction: row;
    gap: .5rem;
  }
  .flex-item {
    -webkit-box-flex: 0;
    -webkit-flex: 0 0 auto;
    flex: 0 0 auto;
  }

  /* Tablas: dejar que ajusten su ancho al contenido */
  table{ display:inline-table; width:auto; max-width:100%; border-collapse:collapse; table-layout:auto; background:transparent; font-family:"Montserrat",sans-serif }
  thead th{ text-align:left; font-family:"Roboto Slab",serif; font-weight:700; text-transform:uppercase; font-size:1.05rem; color:#fff; background:#111; padding:.6rem .9rem; border-radius:30px; white-space:nowrap }
  tbody td{ padding:.45rem .6rem; vertical-align:middle; color:var(--text); font-size:.95rem; line-height:1.2; text-transform:uppercase }
  td.price{ text-align:right; color:var(--accent); font-weight:700; white-space:nowrap }

  /* Encabezados */
  h1,h2,h3{ margin:0; text-transform:uppercase; letter-spacing:.06em }
  h1{ font-family:"Playfair Display",serif; font-size:3rem }
  h2{ font-family:"Roboto Slab",serif; font-size:1.8rem; color:var(--accent) }
  h3{ font-family:"Montserrat",sans-serif; font-size:1.1rem }

  @media (max-width:800px){
    .columns{ column-count:1 }
    .brand{ font-size:2.2rem }
    .subtitle{ font-size:1.3rem }
  }
</style>
<style media="print">
  body, html, .page {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }
  * {
    box-shadow: none !important;
  }
  @page {
    size: A4 landscape;
    margin: 0;
  }
</style>
</head>
<body>
  <div class="page">
    <div class="columns">
      <div class="header">
        <h1 class="brand">Tropical</h1>
        <h2 class="subtitle">Pizza</h2>
        <div class="address">Estocolmo, 6 · Bajo 7, Móstoles · 91 645 26 39</div>
      </div>

      {% for price_table in price_tables %}
        <div class="price-table">
          {{ price_table | safe }}
        </div>
      {% endfor %}
    </div>
  </div>
</body>
</html>